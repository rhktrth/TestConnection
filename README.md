# TestConnectionについて

TestConnectionは、ネットワークのTCP/UDP/Pingによる疎通確認を行うためのソフトウェアです。

特に、ルータやファイアウォールによる通信制限のある環境下でも、疎通確認を行えるようにすることを目標としています。

主な機能は下記の通りです。

* TCP/UDPのサーバとクライアントの機能を持ちます。疎通確認をする両側で本ソフトウェアを用いると、TCP/UDPレベルでの疎通確認ができます。
* TCPの疎通確認は、3-way handshakeを試し、TCPセッション確立で疎通成功と判断します。本ソフトウェアのTCPサーバ・クライアントは、TCPセッションを確立したら何もせず即セッションを切断します。このため、疎通確認をする際、片側が既存の本番稼動中のサーバでも、このソフトウェアによる疎通確認であれば、本番稼動中のサーバに影響を与えることはほぼありません（ただし何があっても責任は取りません）。
* UDPの疎通確認は、データグラムに何も無いパケットを相手に送ります。このため、本ソフトウェア片側のみで使用する場合でも、送信相手に影響を与えることはほぼ無いと考えられます。ただし、本ソフトウェア片側のみで使用する場合は、疎通成功を通信経路中のスニファやファイアウォールを利用して確認する必要があります。
* 同時に多数のTCP/UDPサーバになることができます。
* 連続して接続を試行するTCP/UDP/Pingクライアントになることができます。冗長構成機器の切り替えテストに便利です。
* テスト内容を出力できますので、ネットワーク構築案件における成果物の作成を簡単にできる可能性があります。

最新情報は https://github.com/rhktrth/TestConnection からどうぞ。

ダウンロードは https://github.com/rhktrth/TestConnection/releases からどうぞ。


# 動作環境

* Microsoft .NET Framework 4.5.2以上が動作する Windows であること
* TCP/IPを使用できるネットワークカードを有すること
* 800x600以上の解像度をもつディスプレイを有すること
* 本ソフトウェアに64MB程度のメモリを割り当てられること
* 管理者権限で本ソフトウェアを動作させること


# インストール、アンインストール

## インストール
TestConnectionにはインストーラがありません。
ダウンロードしたファイルを解凍し、適宜のフォルダに配置してご利用ください。
実行ファイル名はTestConnection.exeです。
設定ファイル名はTestConnection.exe.configです。実行ファイルと同じフォルダに置く必要があります。

## アンインストール
インストール時に解凍したフォルダやファイルをすべて削除するだけです。
ご自分で作成したショートカット等も忘れずに削除して下さい。
なお、レジストリは使用していません。


# よくある質問/既知のバグと回避策

* ウィルスチェックソフトウェアと競合する
	* ウィルスチェックソフトウェアの通信遮断機能が働いて、本プログラムによる疎通確認通信が遮断されることがあります。
	* 本プログラム側での対応は難しいので、ウィルスチェックソフトウェア側の設定を変更（本プログラムを信頼するプログラムとする等）、あるいは、一時的にウィルスチェックソフトウェアを無効化する等をしてください。
	* 事例として、25/TCP(SMTP)が遮断されたことがあります。
* Windowsのファイル共有と競合する
	* Windowsのファイル共有関連のポート番号をListenさせる場合、Windows側のをオフにする必要があります。
	* ネットワークアダプタのプロパティから、「Microsoft ネットワーク用ファイルとプリンター共有」や「Microsoft ネットワーク用クライアント」のチェックボックスを外すことで対応できることが多いです。
	* 本プログラムが未起動の状態で、netstat -anなどにより、すでにListenされていないか確認してください。
* 本プログラムからNICの設定変更ができない
	* 私の持つ環境ではNIC設定関連のテストがあまりできていません。
	* 本プログラムによるNIC設定関連がうまく動かに場合は、コントロールパネルから手動で設定してください。
	* NICの設定値を保存する方法として、Windows標準のnetshコマンドを使用するのも一案と思います。
* サーバモードでListenされない
	* サーバモードでListenさせる場合、ListenさせるIPアドレスが、当該PCのNICに存在する必要があります。IPアドレスの設定を確認してください。
* PCをたくさん用意できない
	* Windowsでは一つのNICに複数のIPアドレスを持たせることができますので、それを活用してみてください。
	* ただし、複数サブネットのIPアドレスを扱う場合、ルーティングの設定に注意してください。PCをサブネットごとに用意したほうが無難です。
* ステートフルフェイルオーバのテストができない
	* 本プログラムは、TCPセッション確立後、すぐにセッションを切ってしまうので、ファイアウォール等にかかるTCPセッションのステートフルフェイルオーバのテストには向きません。残念ながら今後の課題です。
	* 切り替え前、切り替え後に疎通ができるかどうか、というテストはできます。


# 著作権、ライセンス等

This software is released under the MIT License, see LICENSE.txt.
